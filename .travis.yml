# Copyright (c) 2018 OpenJAX
#
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
#
# You should have received a copy of The MIT License (MIT) along with this
# program. If not, see <http://opensource.org/licenses/MIT/>.

language: java
jdk:
- oraclejdk8
- oraclejdk11
install:
- cp settings.xml $HOME/.m2/settings.xml && rm -rf ~/.m2/repository/org/openjax
script:
- 'if [ "$TRAVIS_JDK_VERSION" = "oraclejdk8" ] &&
      [ "$TRAVIS_BRANCH" = "master" ] &&
      [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
    sh -c "$SIGNING_KEY" | $GPG_EXECUTABLE --fast-import &> /dev/null &&
    mvn -Dmaven.rtest.skip -DrepoToken=$REPO_TOKEN clean deploy -P deploy;
  else
    mvn -Dmaven.rtest.skip clean install;
  fi'
cache:
  directories:
    - ~/.m2/repository
env:
  global:
  - secure: Oym2s8pSXx5NdR4dxR5j8XuExPgGsjIvY8QdWAq293OvcTiOfFkRN64k+dOT9mMKWkzqRhTfsXx2QfDdSG5drXthJ+dHuqx0EE/B3T3lxk2n7/n8RvikG/TCs2BRA8EObZH9VVU3bHWqmDvug/fV34R16w04mNlk1Cim+BUWLy+if48JCOX9w1uLccgq5AwoIrsTNDN+gfaJ3GLVExjyUMzpS4BfdBPZ1BMLjCcQu19A67HteypJfnTRAVaheAlVlQBQ71CBFD8411ouNNCoQZAqLCDoNCzFplcb8+9GxQ2Vj/nIwhrdTCBx/prxFK7FwE/DAEvLv2b4vgnFuh7eSpAOqB7HDXdtvejpDVyPit8/6FTp8VUWjD5HGrIPIOqUqlNoZjCNzSxLG+DL/ian4T3sU3f2VtRo47LBpFou1emdpt/RY/p5e9MuSFGbee4GxpJDxuX2AgvK9LXJ2rshMzSvzhAmTnBcM5fxl56iR6xretV17FDCuSsZu7i81uNTNc9eSDJwz8zmb9nhbeImjdIg8idbIDZ8XJf5y7E15LppSB4om/HgRLzeZe6YW1s+TpX0cob6jwd2kXNQUZGInYP6+PIPMk83AIpIZkCnl+5ZJq8/Q2JfOF8RyKmC/l/7BxEgqRvmQLryCK7cV3TyiIOK5W1U50F6eygbAT+bf7c=
  - secure: s5E0p/6Egs6H25EjXM+3u7ImDkE7/o3ZMygzvZqKchSQZNTUPMqguUmyVdeCzaVZ6erKCdO7gCEVBqmHlVrKuCqg4ms7PPXp7VfP3P4f+SmTXjNdABdguN+zBdufl7Wxr2eqExDsPA69WdPY3BHGRgstp5g1YbIQD05rA7uGAeGKxSPZYG1xs08nbFjvAn2qFE6YK3qIlLkHZijvkfZCWiw2VZOXD+cPL+m1/lOi3e23zKqxuRqavGfW60J8vPz/eww3B5I/plvhjSg4dOrKj59oeQy1tdF7WSXcFot7JVODveD/8v/aCWCOU/TS/K3l4dt6wrPp2xeXkEtgPyfx2msjpWx+xGncmWIWrycV/LQB+dCoavUhBV2TYlQTMH9kXBfAB3If8URvcLRi+pGqMKSPQlUZaIe7TM0FhDLzK9g9ZLi9iWZ5FNdhiQnfgdwzpNUDYuU2mBhWl6kF9dotoCijVHeOfc76T5I/5ny8DEFCCZqMjjBjoYQwJMatqYO6DVu8f0SmByez75tuBzHIYpFYhIQLMi7c+r58c4je1pji8S+nExQuflZVbea23U571+yyhKowCZHAazHCPv8fNpFgHhA0Mm/yKLycjtmte5dX0NrFpMCK5OHVGihQ+oF/JeaJptR7akM0uYa58OctVwLsTEJO8h0XA698PByBeJQ=
  - secure: jV7glBxevhc2RmoAgxmj5tSvOdG2+mEjJpKXwDOl0Da2veRCTIqCYRGsxP3nucSWDj2I30n/0x4erZoThiOySuSlIDqfRAH7yfrQDzUrvxX26dMscbibvhqH2Qr01jmzWB1UGvxzGPVDwbZpW6EayHztdwKjH6QxmY1ZxuKY7QvD7nN/W1l+wVkkN8FHY50nwhQ2O0fwyoqCNaC6KRQ1MdhGCB9MIncJwDLe2QiqA2dUp+Q+8NHLHuzdbyt4mlBw8ZsijtKRSX/2hnZ2n7NJkxLpA1ZgV9dzOg/Hnw0XBpqiGiZ4t6/2UgZoogdcfdmFDh296OOUh4ISd3d1V+b2S1pRSQCQtpsUG/BJUA+FayNSQqwGsLig8LHZ6jUMVSOth02redAQ9i8Z8du2ebOpfeVY6wy7hG2HXIGO998V6z5RTL7qWn5wDtDJkX68h5l9bihBXr0e70CADYNQoYFCcZkDClwGnfn8G+9F+uaGf1V1VIk1jJZuxF1FTR08/rfonbeTrnqs9juhG8RWBe2iclrPusxK/GJEZrZZfySo/dF+WiVVlLSxZ+SZK+Ae+GLAOtO1APhFmC2Vshpxpn5EYZH+2k96++iVxnRXb8o/7y7mh5gxWp8xFllRbBUApkw2V7eQaI3UglgrCaiIHXCBV29ipvajOFcIOjA3K3yMAlI=
  - secure: CfsT+BDnbSX/8bgrvX170P69GO3V4ZYGS0PVOOByIqVq9KM0DqZ7QVnGRpCkkcetrJmx6bjzzAhkicdGHzQk3W/HKnPj7poIr6CDfMrJkHu/aKukcV7wjPx5+gtxvIrzLSzavf/FNjRqV45uJfTLaJc4c7zwk6D+NIKhf6KMzD6w2iBOqDqc7N8MCvY00Glu1cywIZ4388feuTtnaiT5StsY8LwlbYglvz7gtzmm/wz12c/MQQrzUobdDFNEi6kG/5aox/+MTCkweaS23Z+FsHjznWnTBldKjyuQHqBjsgZjpmQAU0hu3W8XUt8FO2hMt5rCfsNMt6TDQWDIS6SE7OxMq2Lzn686/1Z8acOBaScrcJpgfMWNLHl/BBPKMOPCr7g0W2qYd9ZPVz3EdxerWzC6pgL9Kb1m6PJOp9dnIz6cxOUVQCVFmXvrxLvHqI6lEVzdUhmjWNLbIivlI1WvCLTl2iItsGvvai7ka69bXBpXPRUk3XfOoku0waX9b1tyFBB6Zyu/Fc8puUVdAHhpR7XDU6k7aEpQiIh3V4izFh1MtwPSBFsVAIwSd4Mbsjt3qSrHaXpHx/LWmI7YAI8+5Zw2uAn92CLjr0C/ED/hm3hcHElk0p1DIJxs8bInambGs+MKbeR020pEriB4l+5wcG0m39YkNyl0syFhO017RT4=
  - secure: ymVcka3R1Cj1q/EYMLH8FweA3S26jN3QPlPADiCHs5pJZbMqPrUQ3r45OSPm8OBSfJYbSgeCXSuwSGVZbgVwKbpuaTCUoB4cwjVDssZp2NfyZocz3a+9EYPFlCNQd1x8islq4x1dNx1Bs4/skdiwCT46SNgEnI7UeIOdbNqiFQdNYViYtXeXxJ4xk3wFl2Hp0nQDj2dDVY3Du3TnhsqttDASHSkjB/SDG7ID6lPvv6H5A1uoQB5dpKH9HHeeKCH3KRpQtTpVrfOiZ8+YhU5CgEMGbrlChvzYDP9Wt9enIt72pEN0PvUhTA8fR1z/L9SWbL7ZV44JyzjAXr74HqHZXXLFb1XFuqzuffDdrpsQ3U/LCgf/I/x4Sz4Ptu3TBxhMm3HjOtg0hmLcNiPfysTdFSG9HowSYHvQKt3RRTUWdfwHrND/FsqtPoEXXMUaGU8BXc/jxQ9B12RlKNUBN0JjlKbvTdeMDSw31nia60NNQamx7R0w04VAH6kIh5bMeYN/pPSdDzpOi4GemAiOseSX2JwMvEHkzSeOd/H9xXRwnm0z34UVOvSWk+WGDpbqdbWjhnVFAzeeYOKCFkPLRRHbFb0FT/9VzzsVoEHzL12PruPhWdwl694nBvfMdq4nXjfGTQXLgDJ8UVFEH0bjDYpFpHqtPxoQ5cjYZdivGZm6AS4=
  - secure: L05Ky+SXL0Djw4BCQz2v3Hm9FG5CxAKKb3vIbYZO5gfUqtjp8/lYW+yrgcFOBirr+EY0qVq5Lqp4pOMx94lV3ok/RbDRCo/16il7j7ep6i6/HNe4aaloubXDD5u5ycpIQYqSIIGQpIR6tdXpt/0w951jaTsPreqhFTfM0p8yaC+5yIsCdVuFRnc9GoBb+G/+1bTpdW1ra721cS4iZOOtUQA6kJ69VMVTuTh52bTWVgVq5DrdFjApRmkI5Dqu+MwxRgalRcdHexgs1U3EKfa1MyhMtykOCm0fUPtUQ9FXsasAW1wU8h20si7NpE+jU2SefeClAdboo9FHAa5z5Mz4v9rxkoxOP87qaX29+tez5Qy5Tg0az6/eLi3ixx+BLrGIcGgUs6CYMT7zSqsfQC10vE0ffR2iU8lr4QKkH0xT6WSFvc/7kl0kNf3COIBzbzwDY5GQSNLW5aAGOuiBZZ6lI1NleQdT7wItM6JkRn3teGhWCMFHR+PMIKqeXRC3a5+syfo4R6EI5jyyY03xbz6vIrHjDvqpVcLbnC8FJ26+czKd7mTIHD1V0Kb1enDPX5ZaHJsdU08B7HBgBK78Xk+ZOhaGNVpldoLTLtAMZkhu006/UPcJAbXtXKmmSWQgF+LfDrxqcvJ2QvVMyB0b1ztW9YWmBG2gKHokAzZZ5NKAu8s=
  - secure: N81GkjeCkHbIrIbdNgHWLiSKPh5y8Aarsm01lyU32WS+12YOMDaoAR/c40rmADTe9jEvdZR+5lBmgbXrZdZ/kp1VdqJbD1JnLbIb4PZxwvBa2e+8MU28/pOwu6hdlcmBuBXDPM+zjpt4leE9VKESttnaJONDrPA8VNAV0cvf9LZsdBxXYtvEuMvQFbEcY8z9tI0qdOHKN7i++RXTsegAGCwUejl3Ah2ve7dfDC7ryhZe2hUKuercWl50tD7JW5GIVTSIPD3YKxCCFI1ov3w9JqJASwQtuBA5Qrb+H9KBVI5uk7yernNQDpYfZpd5e8Mt9F2oOxyFFxIsTLwTzOAgD/EaJcbYx2jcBBdYhCtpmbfV1RZOlYKTVAZ8sf86GZqY9dUyQnvN5/8wMbw8LKUGp61QtFtpRYEVUBxBu/yIdBUrVG8UA3QkhBiVShtPJ78mKlO2XXI1QmMsUpue+uSJBLVWm5D9AaHqSIOKDD14npGcyfPJoiUJex1lMrqel0v1LYaGx/kkSo0DhgDWzvIGGZ4l7BBTt52YbdUGxL1KuO/i7pElOoumZlmz/DzyvHKrsQEJXhJHhdVDkIR/d1LvGOjnFZIGyWFcDI7FdThah+/1ARG5/9FyJZfYkc2ozSjaZqkQQmkWqVGVo23PZnywhxaR3gofKB2mYyK/9Iq6Vtc=
